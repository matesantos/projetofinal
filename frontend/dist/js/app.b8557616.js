(function(e){function t(t){for(var s,o,n=t[0],l=t[1],c=t[2],d=0,m=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},i=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00a6":function(e,t,a){"use strict";var s=a("64f5"),r=a.n(s);r.a},"034f":function(e,t,a){"use strict";var s=a("85ec"),r=a.n(s);r.a},"14b7":function(e,t,a){"use strict";var s=a("9be9"),r=a.n(s);r.a},"1d00":function(e,t,a){},"2a47":function(e,t,a){},"45c1":function(e,t,a){"use strict";var s=a("d27f"),r=a.n(s);r.a},"4eb7":function(e,t,a){},5321:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("7f10");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"hide-menu":!e.isMenuVisible||!e.user},attrs:{id:"app"}},[a("Header",{attrs:{title:"Cod3r - Projeto Final",hideToggle:!e.user,hideUserDropdown:!e.user}}),e.user?a("Menu"):e._e(),e.validatingToken?a("Loading"):a("Content"),a("Footer")],1)},i=[],o=a("bc3a"),n=a.n(o);const l="X__knowledge_user",c="http://localhost:3000";function u(e){e&&e.response&&e.response.data?s["default"].toasted.global.defaultError({msg:e.response.data}):"string"===typeof e?s["default"].toasted.global.defaultError({msg:e}):s["default"].toasted.global.defaultError()}var d=a("2f62"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header"},[e.hideToggle?e._e():a("a",{staticClass:"toogle",on:{click:e.toggleMenu}},[a("i",{staticClass:"fa lg",class:e.icon})]),a("h1",{staticClass:"title"},[a("router-link",{attrs:{to:"/"}},[e._v(e._s(e.title))])],1),e.hideUserDropdown?e._e():a("UserDropdown")],1)},p=[],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-dropdown"},[a("div",{staticClass:"user-button"},[a("span",{staticClass:"d-none d-sm-block"},[e._v(" "+e._s(e.user.name)+" ")]),a("div",{staticClass:"user-dropdown-img"},[a("Gravatar",{attrs:{email:e.user.email,alt:"User"}})],1),a("i",{staticClass:"fa fa-angle-down"})]),a("div",{staticClass:"user-dropdown-content"},[e.user.admin?a("router-link",{attrs:{to:"/admin"}},[a("i",{staticClass:"fa fa-cogs"}),e._v("Administração ")]):e._e(),a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[a("i",{staticClass:"fa fa-sign-out"}),e._v("Sair")])],1)])},g=[],h=a("e06a"),v=a.n(h),b={name:"UserDropdown",components:{Gravatar:v.a},computed:Object(d["b"])(["user"]),methods:{logout(){localStorage.removeItem(l),this.$store.commit("setUser",null),this.$router.push({name:"auth"})}}},y=b,_=(a("cebc"),a("2877")),C=Object(_["a"])(y,f,g,!1,null,null,null),$=C.exports,w={name:"Header",components:{UserDropdown:$},props:{title:String,hideToggle:Boolean,hideUserDropdown:Boolean},computed:{icon(){return this.$store.state.isMenuVisible?"fa-angle-left":"fa-angle-down"}},methods:{toggleMenu(){this.$store.commit("toggleMenu")}}},k=w,x=(a("b3ff"),Object(_["a"])(k,m,p,!1,null,null,null)),S=x.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{directives:[{name:"show",rawName:"v-show",value:e.isMenuVisible,expression:"isMenuVisible"}],staticClass:"menu"},[a("div",{staticClass:"menu-filter"},[a("i",{staticClass:"fa fa-search fa-lg"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.treeFilter,expression:"treeFilter"}],staticClass:"filter-filter",attrs:{type:"text",placeholder:"Digite para filtrar..."},domProps:{value:e.treeFilter},on:{input:function(t){t.target.composing||(e.treeFilter=t.target.value)}}})]),a("Tree",{ref:"tree",attrs:{data:e.treeData,options:e.treeOptions,filter:e.treeFilter}})],1)},I=[],O=a("25ea"),P={name:"Menu",components:{Tree:O["a"]},computed:Object(d["b"])(["isMenuVisible"]),data:function(){return{treeFilter:"",treeData:this.getTreeData(),treeOptions:{propertyNames:{text:"name"},filter:{emptyText:"Categoria não encontrada."}}}},methods:{getTreeData(){const e=c+"/categories/tree";return n.a.get(e).then(e=>e.data).catch(u)},onNodeSelect(e){this.$router.push({name:"articlesByCategory",params:{id:e.id}}),"xs"!==this.$mq&&"sm"!==this.$mq||this.$store.commit("toggleMenu",!1)}},mounted(){this.$refs.tree.$on("node:selected",this.onNodeSelect)}},U=P,E=(a("e221"),Object(_["a"])(U,A,I,!1,null,null,null)),j=E.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("router-view")],1)},T=[],N={name:"Content"},D=N,q=(a("00a6"),Object(_["a"])(D,M,T,!1,null,null,null)),V=q.exports,B=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer"},[a("span",[e._v("Copyright "),a("strong",[e._v("Matesantos System")]),e._v(" @ 2019-2020 ")])])}],L={name:"Footer"},J=L,H=(a("14b7"),Object(_["a"])(J,B,F,!1,null,null,null)),z=H.exports,R=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},G=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loading"},[s("img",{attrs:{src:a("cf1c"),alt:""}})])}],X={name:"Loading"},K=X,Q=(a("adea"),Object(_["a"])(K,R,G,!1,null,null,null)),W=Q.exports,Y={name:"App",components:{Header:S,Menu:j,Content:V,Footer:z,Loading:W},computed:Object(d["b"])(["isMenuVisible","user"]),data:function(){return{validatingToken:!0}},methods:{async validateToken(){this.validatingToken=!0;const e=localStorage.getItem(l),t=JSON.parse(e);if(this.$store.commit("setUser",null),!t)return this.validatingToken=!1,void this.$router.push({name:"auth"});const a=await n.a.post(c+"/validateToken",t);a.data?(this.$store.commit("setUser",t),"xs"!==this.$mq&&"sm"!==this.$mq||this.$store.commit("toggleMenu",!1)):(localStorage.removeItem(l),this.$router.push({name:"auth"})),this.validatingToken=!1}},created(){this.validateToken()}},Z=Y,ee=(a("034f"),Object(_["a"])(Z,r,i,!1,null,null,null)),te=ee.exports,ae=(a("f9e3"),a("2dd8"),a("5f5b"));s["default"].use(ae["a"]);var se=a("a65d"),re=a.n(se);s["default"].use(re.a,{iconPack:"fontawesome",duration:3e3}),s["default"].toasted.register("defaultSuccess",e=>e.msg?e.msg:"Operação realizada com sucesso.",{type:"success",icon:"check"}),s["default"].toasted.register("defaultError",e=>e.msg?e.msg:"Ops... Erro inesperado.",{type:"error",icon:"times"});const ie=e=>e,oe=e=>{if(401!==e.response.status)return Promise.reject(e);window.location="/"};n.a.interceptors.response.use(ie,oe);s["default"].use(d["a"]);var ne=new d["a"].Store({state:{isMenuVisible:!1,user:null},mutations:{toggleMenu(e,t){e.user?e.isMenuVisible=void 0===t?!e.isMenuVisible:t:e.isMenuVisible=!1},setUser(e,t){e.user=t,t?(n.a.defaults.headers.common["Authorization"]="bearer "+t.token,e.isMenuVisible=!0):(delete n.a.defaults.headers.common["Authorization"],e.isMenuVisible=!1)}}}),le=a("8c4f"),ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("PageTitle",{attrs:{icon:"fa fa-home",main:"Dashboard",sub:"Base de Conhecimento"}}),a("div",{staticClass:"stats"},[a("Stat",{attrs:{title:"Categorias",value:e.stat.categories,icon:"fa fa-folder",color:"#d54d50"}}),a("Stat",{attrs:{title:"Artigos",value:e.stat.articles,icon:"fa fa-file",color:"#3bc480"}}),a("Stat",{attrs:{title:"Usuários",value:e.stat.users,icon:"fa fa-user",color:"#3282cd"}})],1)],1)},ue=[],de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-title"},[a("h1",[e.icon?a("i",{class:e.icon}):e._e(),e._v(e._s(e.main))]),a("h2",[e._v(e._s(e.sub))]),a("hr")])},me=[],pe={name:"PageTitle",props:["icon","main","sub"]},fe=pe,ge=(a("6724"),Object(_["a"])(fe,de,me,!1,null,null,null)),he=ge.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stat"},[a("div",{staticClass:"stat-icon"},[a("i",{class:e.icon,style:e.style})]),a("div",{staticClass:"stat-info"},[a("span",{staticClass:"stat-title"},[e._v(e._s(e.title)+" ")]),a("span",{staticClass:"stat-value"},[e._v(e._s(e.value)+" ")])])])},be=[],ye={name:"Stat",props:["title","value","icon","color"],computed:{style(){return"color: "+(this.color||"#000")}}},_e=ye,Ce=(a("5b5c"),Object(_["a"])(_e,ve,be,!1,null,null,null)),$e=Ce.exports,we={name:"Home",components:{PageTitle:he,Stat:$e},data:function(){return{stat:{}}},methods:{getStats(){n.a.get(c+"/stats").then(e=>{this.stat=e.data||{},console.log(this.stat.users)})}},mounted(){this.getStats()}},ke=we,xe=(a("b497"),Object(_["a"])(ke,ce,ue,!1,null,null,null)),Se=xe.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-pages"},[a("PageTitle",{attrs:{icon:"fa fa-cogs",main:"Administração do Sistema",sub:"Cadastro & Cia"}}),a("div",{staticClass:"admin-pages-tabs"},[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",[a("b-tab",{attrs:{title:"Artigos",active:""}},[a("ArticleAdmin")],1),a("b-tab",{attrs:{title:"Categorias"}},[a("CategoryAdmin")],1),a("b-tab",{attrs:{title:"Usuário"}},[a("UserAdmin")],1)],1)],1)],1)],1)},Ie=[],Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-admin"},[a("b-form",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.article.id,expression:"article.id"}],attrs:{id:"articleId",type:"hidden"},domProps:{value:e.article.id},on:{input:function(t){t.target.composing||e.$set(e.article,"id",t.target.value)}}}),a("b-form-group",{attrs:{label:"Nome do Artigo:","label-for":"article-name"}},[a("b-form-input",{attrs:{id:"article-name",type:"text",readonly:"remove"===e.mode,placeholder:"Digite o Nome do Artigo..."},model:{value:e.article.name,callback:function(t){e.$set(e.article,"name",t)},expression:"article.name"}})],1),a("b-form-group",{attrs:{label:"Descrição:","label-for":"article-description"}},[a("b-form-input",{attrs:{id:"article-description",type:"text",readonly:"remove"===e.mode,placeholder:"Digite a Descrição do Artigo..."},model:{value:e.article.description,callback:function(t){e.$set(e.article,"description",t)},expression:"article.description"}})],1),a("b-form-group",{attrs:{label:"Imagem [URL]:","label-for":"article-imageUrl"}},[a("b-form-input",{attrs:{id:"article-imageUrl",type:"text",readonly:"remove"===e.mode,placeholder:"Informe a URL da Imagem do Artigo..."},model:{value:e.article.imageUrl,callback:function(t){e.$set(e.article,"imageUrl",t)},expression:"article.imageUrl"}})],1),"save"===e.mode?a("b-form-group",{attrs:{label:"Categoria:","label-for":"article-categoryId"}},[a("b-form-select",{attrs:{id:"article-categoryId",options:e.categories},model:{value:e.article.categoryId,callback:function(t){e.$set(e.article,"categoryId",t)},expression:"article.categoryId"}})],1):e._e(),"save"===e.mode?a("b-form-group",{attrs:{label:"Autor:","label-for":"article-userId"}},[a("b-form-select",{attrs:{id:"article-userId",options:e.users},model:{value:e.article.userId,callback:function(t){e.$set(e.article,"userId",t)},expression:"article.userId"}})],1):e._e(),"save"===e.mode?a("b-form-group",{attrs:{label:"Conteúdo:","label-for":"article-categoryId"}},[a("VueEditor",{attrs:{placeholder:"Informe o conteúdo do artigo."},model:{value:e.article.content,callback:function(t){e.$set(e.article,"content",t)},expression:"article.content"}})],1):e._e(),"save"===e.mode?a("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Salvar")]):e._e(),"remove"===e.mode?a("b-button",{attrs:{variant:"danger"},on:{click:e.remove}},[e._v("Excluir")]):e._e(),a("b-button",{staticClass:"ml-2",on:{click:e.reset}},[e._v("Cancelar")])],1),a("b-table",{attrs:{hover:"",striped:"",items:e.articles,fields:e.fields},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(a){return e.loadArticle(t.item)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("b-button",{attrs:{variant:"danger"},on:{click:function(a){return e.loadArticle(t.item,"remove")}}},[a("i",{staticClass:"fa fa-trash"})])]}}])}),a("b-pagination",{attrs:{size:"md","total-rows":e.count,"per-page":e.limit},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)},Pe=[],Ue=a("5873"),Ee={name:"ArticleAdmin",components:{VueEditor:Ue["a"]},data:function(){return{mode:"save",articles:[],article:{},categories:[],users:[],page:1,limit:0,count:0,fields:[{key:"id",label:"Código",sortable:!0},{key:"name",label:"Nome",sortable:!0},{key:"description",label:"Descrição",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{save(){const e=this.article.id?"/"+this.article.id:"",t=this.article.id?"put":"post";n.a[t](`${c}/articles${e}`,this.article).then(()=>{this.$toasted.global.defaultSuccess(),this.reset()}).catch(u)},remove(){const e=this.article.id,t=`${c}/articles/${e}`;n.a.delete(t).then(()=>{this.$toasted.global.defaultSuccess(),this.reset()}).catch(u)},loadArticles(){const e=`${c}/articles?page=${this.page}`;n.a.get(e).then(e=>{this.articles=e.data.data,this.count=e.data.count,this.limit=e.data.limit}).catch(u)},loadArticle(e,t="save"){this.mode=t,n.a.get(`${c}/articles/${e.id}`).then(e=>this.article=e.data)},reset(){this.mode="save",this.article={},this.loadArticles()},loadCategories(){const e=c+"/categories";n.a.get(e).then(e=>{this.categories=e.data.map(e=>({value:e.id,text:e.path}))})},loadUsers(){const e=c+"/users";n.a.get(e).then(e=>{this.users=e.data.map(e=>({value:e.id,text:`${e.name} - ${e.email}`}))})}},watch:{page(){this.loadArticles()}},mounted(){this.loadArticles(),this.loadCategories(),this.loadUsers()}},je=Ee,Me=Object(_["a"])(je,Oe,Pe,!1,null,null,null),Te=Me.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-admin"},[a("b-form",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.id,expression:"user.id"}],attrs:{id:"userId",type:"hidden"},domProps:{value:e.user.id},on:{input:function(t){t.target.composing||e.$set(e.user,"id",t.target.value)}}}),a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Nome","label-for":"user-name"}},[a("b-form-input",{attrs:{id:"user-name",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Nome do Usuário...."},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1)],1),a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Email","label-for":"user-email"}},[a("b-form-input",{attrs:{id:"user-email",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Email do Usuário...."},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1)],1),a("b-form-checkbox",{staticClass:"mt-3 mb-3",attrs:{id:"user-admin"},model:{value:e.user.admin,callback:function(t){e.$set(e.user,"admin",t)},expression:"user.admin"}},[e._v(" Administrador? ")]),a("b-row",{directives:[{name:"show",rawName:"v-show",value:"save"===e.mode,expression:"mode === 'save'"}]},[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Senha:","label-for":"user-password"}},[a("b-form-input",{attrs:{id:"user-password",type:"password",required:"",placeholder:"Informe a Senha do Usuário...."},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1)],1),a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Confirmação de Senha","label-for":"user-confirm-password"}},[a("b-form-input",{attrs:{id:"user-confirm-password",type:"password",required:"",placeholder:"Confirme a Senha do Usuário...."},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{xs:"12"}},["save"===e.mode?a("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Salvar")]):e._e(),"remove"===e.mode?a("b-button",{attrs:{variant:"danger"},on:{click:e.remove}},[e._v("Excluir")]):e._e(),a("b-button",{staticClass:"ml-2",on:{click:e.reset}},[e._v("Cancelar")])],1)],1)],1),a("hr"),a("b-table",{attrs:{hover:"",striped:"",items:e.users,fields:e.fields},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(a){return e.loadUser(t.item)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("b-button",{attrs:{variant:"danger"},on:{click:function(a){return e.loadUser(t.item,"remove")}}},[a("i",{staticClass:"fa fa-trash"})])]}}])})],1)},De=[],qe={name:"UserAdmin",data:function(){return{mode:"save",user:{},users:[],fields:[{key:"id",label:"Código",sortable:!0},{key:"name",label:"Nome",sortable:!0},{key:"email",label:"E-mail",sortable:!0},{key:"admin",label:"Administrador",sortable:!0,formatter:e=>e?"Sim":"Não"},{key:"actions",label:"Ações"}]}},methods:{loadUsers(){const e=c+"/users";n.a.get(e).then(e=>{this.users=e.data})},reset(){this.mode="save",this.user={},this.loadUsers()},save(){const e=this.user.id?"put":"post",t=this.user.id?"/"+this.user.id:"";n.a[e](`${c}/users${t}`,this.user).then(()=>{this.$toasted.global.defaultSuccess(),this.reset()}).catch(u)},remove(){const e=this.user.id;n.a.delete(`${c}/users/${e}`).then(()=>{this.$toasted.global.defaultSuccess(),this.reset()}).catch(u)},loadUser(e,t="save"){this.mode=t,this.user={...e}}},mounted(){this.loadUsers()}},Ve=qe,Be=Object(_["a"])(Ve,Ne,De,!1,null,null,null),Fe=Be.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category-admin"},[a("b-form",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.category.id,expression:"category.id"}],attrs:{id:"catagoryId",type:"hidden"},domProps:{value:e.category.id},on:{input:function(t){t.target.composing||e.$set(e.category,"id",t.target.value)}}}),a("b-form-group",{attrs:{label:"Nome:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Nome da Categoria...."},model:{value:e.category.name,callback:function(t){e.$set(e.category,"name",t)},expression:"category.name"}})],1),a("b-form-group",{attrs:{label:"Categoria Pai:","label-for":"category-parentId"}},["remove"!==e.mode?a("b-form-select",{attrs:{id:"category-parentId",options:e.categories},model:{value:e.category.parentId,callback:function(t){e.$set(e.category,"parentId",t)},expression:"category.parentId"}}):a("b-form-input",{attrs:{id:"category-parentId",type:"text",readonly:""},model:{value:e.category.path,callback:function(t){e.$set(e.category,"path",t)},expression:"category.path"}})],1),"save"===e.mode?a("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Salvar")]):e._e(),"remove"===e.mode?a("b-button",{attrs:{variant:"danger"},on:{click:e.remove}},[e._v("Excluir")]):e._e(),a("b-button",{staticClass:"ml-2",on:{click:e.reset}},[e._v("Cancelar")])],1),a("hr"),a("b-table",{attrs:{striped:"",hover:"",items:e.categories,fields:e.fields},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(a){return e.loadCategory(t.item)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("b-button",{attrs:{variant:"danger"},on:{click:function(a){return e.loadCategory(t.item,"remove")}}},[a("i",{staticClass:"fa fa-trash"})])]}}])})],1)},Je=[],He={name:"CategoryAdmin",data:function(){return{mode:"save",category:{},categories:[],fields:[{key:"id",label:"Código",sortable:!0},{key:"name",label:"Nome",sortable:!0},{key:"path",label:"Caminho",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{save(){const e=this.category.id?"/"+this.category.id:"",t=this.category.id?"put":"post";n.a[t](`${c}/categories${e}`,this.category).then(()=>{this.$toasted.global.defaultSuccess(),this.reset()}).catch(u)},remove(){const e=this.category.id,t=`${c}/categories/${e}`;n.a.delete(t).then(()=>{this.$toasted.global.defaultSuccess(),this.reset()}).catch(u)},reset(){this.mode="save",this.category={},this.loadCategories()},loadCategories(){const e=c+"/categories";n.a.get(e).then(e=>{this.categories=e.data.map(e=>({...e,value:e.id,text:e.path}))}).catch(u)},loadCategory(e,t="save"){this.mode=t,this.category={...e}}},mounted(){this.loadCategories()}},ze=He,Re=Object(_["a"])(ze,Le,Je,!1,null,null,null),Ge=Re.exports,Xe={name:"AdminPages",components:{PageTitle:he,UserAdmin:Fe,CategoryAdmin:Ge,ArticleAdmin:Te}},Ke=Xe,Qe=Object(_["a"])(Ke,Ae,Ie,!1,null,null,null),We=Qe.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"articles-by-category"},[a("PageTitle",{attrs:{icon:"fa fa-folder-o",main:e.category.name,sub:"Categoria"}}),a("ul",e._l(e.articles,(function(e){return a("li",{key:e.id},[a("ArticleItem",{attrs:{article:e}})],1)})),0),a("div",{staticClass:"load-more"},[e.loadMore?a("button",{staticClass:"btn btn-lg btn-outline-primary",on:{click:e.getArticles}},[e._v("Carregar mais Artigos")]):e._e()])],1)},Ze=[],et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-item"},[a("router-link",{attrs:{to:{name:"articleById",params:{id:e.article.id}}}},[a("div",{staticClass:"article-item-img d-none d-sm-block"},[e.article.imageUrl?a("img",{attrs:{src:e.article.imageUrl,width:"150",height:"150",alt:"Artigo"}}):a("iframe",{attrs:{src:"@/assets/article.png",width:"150",height:"150",alt:"Artigo"}})]),a("div",{staticClass:"article-item-info"},[a("h2",[e._v(e._s(e.article.name))]),a("p",[e._v(e._s(e.article.description))]),a("span",{staticClass:"article-item-author"},[a("strong",[e._v("Autor: ")]),e._v(e._s(e.article.author)+" ")])])])],1)},tt=[],at={name:"ArticleItem",props:["article"]},st=at,rt=(a("fb2c"),Object(_["a"])(st,et,tt,!1,null,null,null)),it=rt.exports,ot={name:"ArticlesByCategory",components:{PageTitle:he,ArticleItem:it},data:function(){return{category:{},articles:[],page:1,loadMore:!0}},methods:{getCategory(){const e=`${c}/categories/${this.category.id}`;n.a.get(e).then(e=>this.category=e.data).catch(u)},getArticles(){const e=`${c}/categories/${this.category.id}/articles?page=${this.page}`;n()(e).then(e=>{this.articles=this.articles.concat(e.data),this.page++,0===e.data.length&&(this.loadMore=!1)}).catch(u)}},watch:{$route(e){this.category.id=e.params.id,this.articles=[],this.page=1,this.loadMore=!0,this.getCategory(),this.getArticles()}},mounted(){this.category.id=this.$route.params.id,this.getCategory(),this.getArticles()}},nt=ot,lt=(a("cb32"),Object(_["a"])(nt,Ye,Ze,!1,null,null,null)),ct=lt.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-by-id"},[a("PageTitle",{attrs:{icon:"fa fa-folder-o",main:e.article.name,sub:e.article.description}}),a("div",{staticClass:"article-content",domProps:{innerHTML:e._s(e.article.content)}})],1)},dt=[],mt=(a("b8f9"),a("1487")),pt=a.n(mt),ft={name:"ArticlesById",components:{PageTitle:he},data:function(){return{article:{}}},mounted(){const e=`${c}/articles/${this.$route.params.id}`;n.a.get(e).then(e=>this.article=e.data).catch(u)},updated(){document.querySelectorAll(".article-content pre.ql-syntax").forEach(e=>{pt.a.highlightBlock(e)})}},gt=ft,ht=(a("45c1"),Object(_["a"])(gt,ut,dt,!1,null,null,null)),vt=ht.exports,bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"auth-content"},[s("div",{staticClass:"auth-modal"},[s("img",{attrs:{src:a("cf05"),width:"200",alt:"Logo"}}),s("hr"),s("div",{staticClass:"auth-title"},[e._v(e._s(e.showSignup?"Cadastro":"Login"))]),e.showSignup?s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text",placeholder:"Nome"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}):e._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",placeholder:"E-mail"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"Senha"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e.showSignup?s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.confirmPassword,expression:"user.confirmPassword"}],attrs:{type:"password",placeholder:"Confirme a Senha"},domProps:{value:e.user.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"confirmPassword",t.target.value)}}}):e._e(),e.showSignup?s("button",{on:{click:e.signup}},[e._v("Registar")]):s("button",{on:{click:e.signin}},[e._v("Entrar")]),s("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.showSignup=!e.showSignup}}},[e.showSignup?s("span",[e._v("Já tem cadastro? Acesso o Login")]):s("span",[e._v("Não tem cadastro? Registre-se aqui!")])])])])},yt=[],_t={name:"Auth",data:function(){return{showSignup:!1,user:{}}},methods:{signin(){n.a.post(c+"/signin",this.user).then(e=>{this.$store.commit("setUser",e.data),localStorage.setItem(l,JSON.stringify(e.data)),this.$router.push({path:"/"})}).catch(u)},signup(){n.a.post(c+"/signup",this.user).then(()=>{this.$toasted.global.defaultSuccess(),this.user={},this.showSignup=!1}).catch(e=>{console.log(e)})}}},Ct=_t,$t=(a("ee68"),Object(_["a"])(Ct,bt,yt,!1,null,null,null)),wt=$t.exports;s["default"].use(le["a"]);const kt=[{name:"home",path:"/",component:Se},{name:"adminPages",path:"/admin",component:We,meta:{requiresAdmin:!0}},{name:"articlesByCategory",path:"/categories/:id/articles",component:ct},{name:"articleById",path:"/articles/:id",component:vt},{name:"auth",path:"/auth",component:wt}],xt=new le["a"]({mode:"history",routes:kt});xt.beforeEach((e,t,a)=>{const s=localStorage.getItem(l);if(e.matched.some(e=>e.meta.requiresAdmin)){const e=JSON.parse(s);e&&e.admin?a():a({name:"/"})}else a()});var St=xt;s["default"].config.productionTip=!1,new s["default"]({store:ne,router:St,render:e=>e(te)}).$mount("#app")},"5b5c":function(e,t,a){"use strict";var s=a("81a0"),r=a.n(s);r.a},"5e0e":function(e,t,a){},"64f5":function(e,t,a){},6724:function(e,t,a){"use strict";var s=a("4eb7"),r=a.n(s);r.a},"6a5c":function(e,t,a){},"81a0":function(e,t,a){},8313:function(e,t,a){},"85ec":function(e,t,a){},"8d87":function(e,t,a){},"9a2c":function(e,t,a){},"9be9":function(e,t,a){},adea:function(e,t,a){"use strict";var s=a("2a47"),r=a.n(s);r.a},b3ff:function(e,t,a){"use strict";var s=a("1d00"),r=a.n(s);r.a},b497:function(e,t,a){"use strict";var s=a("8313"),r=a.n(s);r.a},cb32:function(e,t,a){"use strict";var s=a("5e0e"),r=a.n(s);r.a},cebc:function(e,t,a){"use strict";var s=a("9a2c"),r=a.n(s);r.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.af224374.png"},cf1c:function(e,t,a){e.exports=a.p+"img/loading.8a7630ca.gif"},d27f:function(e,t,a){},e221:function(e,t,a){"use strict";var s=a("5321"),r=a.n(s);r.a},ee68:function(e,t,a){"use strict";var s=a("6a5c"),r=a.n(s);r.a},fb2c:function(e,t,a){"use strict";var s=a("8d87"),r=a.n(s);r.a}});
//# sourceMappingURL=app.b8557616.js.map